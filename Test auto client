package SeleniumTutrial;

 

import java.awt.AWTException;

import java.awt.Robot;

import java.awt.event.KeyEvent;

//import java.awt.event.KeyEvent;

import java.util.concurrent.TimeUnit;

 

import org.openqa.selenium.By;

import org.openqa.selenium.JavascriptExecutor;

import org.openqa.selenium.WebDriver;

import org.openqa.selenium.WebElement;

import org.openqa.selenium.chrome.ChromeDriver;

import org.openqa.selenium.chrome.ChromeOptions;

import org.openqa.selenium.support.ui.Select;

 

 

 

public class SeleniumTutrial {

      

      

 

             public static void main(String[] args) throws InterruptedException, AWTException {

                    // code pour activer le webdriver et lancer vers la page we.trade

                    String BaseURL = "https://bank1-demo.huberto.org";

                    

                     WebDriver driver ;

                     System.setProperty ("webdriver.chrome.driver","C:/HOMEWARE/ITEC-Toolbox/projects/SeleniumTutrial/src/test/java/chromedriver.exe");

                     ChromeOptions options = new ChromeOptions();

                 options.setExperimentalOption("useAutomationExtension", false);

                 driver = new ChromeDriver(options);

                 driver.manage().timeouts().implicitlyWait(50,TimeUnit.SECONDS);

                 driver.manage().window().maximize();

             

             System.out.println("==== Ouvrir " + BaseURL +" ====");

                    driver.get(BaseURL);

                   

                   

                    driver.findElement(By.id("login-button-login")).click();

                    driver.findElement(By.id("username")).sendKeys("societe-generale@bank1.huberto.org");

                    driver.findElement(By.id("password")).sendKeys("testpass");

                    driver.findElement(By.id("login-button")).click();

                    driver.findElement(By.xpath("//span[contains(text(),'Nouvelle commande')]")).click(); 

                    driver.findElement(By.xpath("//*[@id='buyer']/h4")).click(); 

                    driver.findElement(By.xpath("/html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/app-search-counterparty/div/section[1]/div/input")).sendKeys("sg t");

                    driver.findElement(By.xpath("//html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/app-search-counterparty/div/section[1]/div/button/span")).click();

                    driver.findElement(By.xpath("/html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/app-search-counterparty/div/section[2]/div[3]/div[1]/div/div[2]/button/span")).click();

                   

                   

 

                                        Select sel = new Select(driver.findElement(By.id("transaction-currency-dropdown")));

 

                                        sel.selectByVisibleText("EUR");

                                       

                                        Select sell = new Select(driver.findElement(By.id("bank-services-dropdown-form-required-settlement-condition")));

 

                                        sell.selectByVisibleText("Commande acceptée");

                                       

                                        new Select(driver.findElement(By.id("bank-services-dropdown-form-after-condition"))).selectByVisibleText("après la date de satisfaction des conditions de règlement");

                                       

                                    

                                       

                                         driver.findElement(By.xpath("/html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/div[2]/div/button")).click();

                                        driver.findElement(By.id("skip-goods-details-button")).click();

                                         //driver.findElement(By.xpath("/html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/div[1]/section[1]/app-transport-details/section/form/div[1]/div/div[2]/div/div/div[2]/input")).click();

                                        WebElement element = driver.findElement(By.xpath("/html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/div[1]/section[1]/app-transport-details/section/form/div[1]/div/div[2]/div/div/div[2]/input"));

                                        JavascriptExecutor jse = (JavascriptExecutor)driver;

                                         jse.executeScript("arguments[0].value='38';", element);

 

                                       

                                         //driver.findElement(By.xpath("/html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/div[1]/section[1]/app-transport-details/section/form/div[1]/div/div[2]/div/div/div[2]/input")).sendKeys("100");

                                         driver.findElement(By.xpath("/html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/div[2]/div/button[2]")).click();

                                       

                                       

                                        driver.findElement(By.id("transaction-input-purchase-order-id")).sendKeys("test");

                                        new Select(driver.findElement(By.id("transaction-incoterms-dropdown"))).selectByVisibleText("EXW - EX Works");

                                        driver.findElement(By.id("transaction-input-named-place")).sendKeys("Paris");

                                         driver.findElement(By.xpath("//*[@id='transaction-datepicker-expiry-date']/div/input[2]")).click();

                                         driver.findElement(By.xpath("//*[@id='transaction-datepicker-expiry-date']/div/ngb-datepicker/div[2]/div/ngb-datepicker-month-view/div[6]/div[6]/div")).click();

                                        driver.findElement(By.id("transaction-input-other-costs")).click();

                                       

                                        Robot robot = new Robot();

                                        robot.keyPress(KeyEvent.VK_3);

                                         //driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

                                        robot.delay(1000);

                                        robot.keyPress(KeyEvent.VK_3);

//driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

//WebElement element1 = driver.findElement(By.id("transaction-input-other-costs"));

//JavascriptExecutor jse1 = (JavascriptExecutor)driver;

//jse1.executeScript("arguments[0].value='33';", element1);

 

                                                                                                    

                                       

                                 

                                         driver.findElement(By.xpath("/html/body/app-root/main/app-logged-in/section/div/app-create-trade/app-progress/div[4]/div[2]/div/button[2]")).click();

                                         driver.findElement(By.xpath("//*[@id='checkbox-accept-terms-and-conditions']")).click();

                                         driver.findElement(By.xpath("//*[@id='submit-create-trade-button']")).click();

                                         driver.findElement(By.xpath("//*[@id='submit-trade-modal']/div/div/button[2]")).click();

                                       

Thread.sleep(30000);

                    driver.close();

                    driver.quit();

                   

 

             }

 

       }
